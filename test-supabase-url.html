<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Supabase URL</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1f2937;
            color: #f3f4f6;
        }
        .box {
            background: #374151;
            padding: 20px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success { color: #22c55e; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        code {
            background: #1f2937;
            padding: 2px 6px;
            border-radius: 4px;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Supabase URL</h1>
    
    <div class="box">
        <h2>ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h2>
        <div id="info"></div>
    </div>
    
    <div class="box">
        <h2>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„</h2>
        <button onclick="testMenuItems()">Ø§Ø®ØªØ¨Ø§Ø± menu_items</button>
        <button onclick="testCustomers()">Ø§Ø®ØªØ¨Ø§Ø± customers</button>
        <button onclick="testOrders()">Ø§Ø®ØªØ¨Ø§Ø± ramadan_orders</button>
        <div id="test-results"></div>
    </div>

    <!-- Supabase JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
    <script src="supabase-config.js?v=2.0"></script>
    
    <script>
        const info = document.getElementById('info');
        const testResults = document.getElementById('test-results');
        
        async function init() {
            info.innerHTML = '<p class="warning">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</p>';
            
            try {
                const client = await window.SUPABASE_CONFIG.init();
                
                if (client) {
                    const url = window.SUPABASE_CONFIG.URL;
                    const key = window.SUPABASE_CONFIG.KEY;
                    
                    const keyPreview = key ? key.substring(0, 50) + '...' : 'âŒ null - Worker Ù„Ù… ÙŠØ±Ø¬Ø¹ Key!';
                    const urlStatus = url === 'https://noooysoqieuuaogrhlty.supabase.co' ? 'âœ… ØµØ­ÙŠØ­' : 'âŒ Ø®Ø§Ø·Ø¦';
                    const keyStatus = key ? 'âœ… Ù…ÙˆØ¬ÙˆØ¯' : 'âŒ null - Ø£Ø¶Ù Environment Variables ÙÙŠ Cloudflare!';
                    
                    info.innerHTML = `
                        <p class="success">âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­!</p>
                        <p><strong>Supabase URL:</strong> ${urlStatus}<br><code>${url || 'âŒ null'}</code></p>
                        <p><strong>Anon Key:</strong> ${keyStatus}<br><code>${keyPreview}</code></p>
                        <hr>
                        <p class="warning">âš ï¸ ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ù‡Ø°Ø§ Ù‡Ùˆ URL Ø§Ù„ØµØ­ÙŠØ­!</p>
                        <p>URL Ø§Ù„ØµØ­ÙŠØ­:<br><code>https://noooysoqieuuaogrhlty.supabase.co</code></p>
                    `;
                } else {
                    info.innerHTML = '<p class="error">âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„</p>';
                }
            } catch (error) {
                info.innerHTML = `<p class="error">âŒ Ø®Ø·Ø£: ${error.message}</p>`;
            }
        }
        
        async function testMenuItems() {
            testResults.innerHTML = '<p class="warning">â³ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± menu_items...</p>';
            
            try {
                const client = window.SUPABASE_CONFIG.getClient();
                const { data, error } = await client
                    .from('menu_items')
                    .select('*')
                    .limit(5);
                
                if (error) throw error;
                
                testResults.innerHTML = `
                    <p class="success">âœ… Ù†Ø¬Ø­! ÙˆØ¬Ø¯Ù†Ø§ ${data.length} Ø¹Ù†ØµØ±</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                testResults.innerHTML = `
                    <p class="error">âŒ ÙØ´Ù„: ${error.message}</p>
                    <p class="warning">ğŸ’¡ Ù‡Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ SupabaseØŸ</p>
                `;
            }
        }
        
        async function testCustomers() {
            testResults.innerHTML = '<p class="warning">â³ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± customers...</p>';
            
            try {
                const client = window.SUPABASE_CONFIG.getClient();
                const { data, error } = await client
                    .from('customers')
                    .select('*')
                    .limit(5);
                
                if (error) throw error;
                
                testResults.innerHTML = `
                    <p class="success">âœ… Ù†Ø¬Ø­! ÙˆØ¬Ø¯Ù†Ø§ ${data.length} Ø²Ø¨ÙˆÙ†</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                testResults.innerHTML = `
                    <p class="error">âŒ ÙØ´Ù„: ${error.message}</p>
                    <p class="warning">ğŸ’¡ Ù‡Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ SupabaseØŸ</p>
                `;
            }
        }
        
        async function testOrders() {
            testResults.innerHTML = '<p class="warning">â³ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± ramadan_orders...</p>';
            
            try {
                const client = window.SUPABASE_CONFIG.getClient();
                const { data, error } = await client
                    .from('ramadan_orders')
                    .select('*')
                    .limit(5);
                
                if (error) throw error;
                
                testResults.innerHTML = `
                    <p class="success">âœ… Ù†Ø¬Ø­! ÙˆØ¬Ø¯Ù†Ø§ ${data.length} Ø·Ù„Ø¨</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                testResults.innerHTML = `
                    <p class="error">âŒ ÙØ´Ù„: ${error.message}</p>
                    <p class="warning">ğŸ’¡ Ù‡Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ SupabaseØŸ</p>
                `;
            }
        }
        
        window.addEventListener('load', init);
    </script>
</body>
</html>
